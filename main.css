/* === Palette minimale (m√™mes couleurs qu'actuellement) === */
:root {
  /* UI g√©n√©rique */
  --ui-bg: #ffffff;
  --ui-bg-alt: #f0f2f5;
  --ui-panel: #f8fbfe;
  --ui-border: #d7e2ea;
  --text: #333;
  --text-muted: #555;
  --overlay: rgba(0, 0, 0, 0.5);
  --shadow-sm: rgba(0, 0, 0, 0.1);
  --shadow-md: rgba(0, 0, 0, 0.25);
  --shadow-lg: rgba(0, 0, 0, 0.2);

  /* Topbar */
  --topbar-bg: #1e1e2f;
  --topbar-fg: #ffffff;

  /* Boutons (une seule paire primaire + hover) */
  --btn-bg: #10346d; /* primaire (d√©j√† utilis√© partout) */
  --btn-hover-bg: #194da1; /* hover primaire */
  --btn-text: #ffffff;
  --btn-border: #000000;

  /* Accent (r√©ouvrir, liens bleus) ‚Äî m√™me couleur pour tout + hover */
  --accent: #007bff;
  --accent-hover: #0056b3;

  /* Danger + Warning (m√™mes couleurs qu‚Äôactuelles, un seul hover chacun) */
  --danger: #e74c3c;
  --danger-hover: #c0392b;
  --danger-strong: #b91c1c;
  --danger-light: #ef4444;
  --warning: #e67e22;
  --warning-hover: #d35400;

  /* Statuts ‚Äî on garde les codes & couleurs que tu avais */
  --stat-dc: green; /* dispo */
  --stat-er: red; /* en route */
  --stat-al: red; /* alerte */
  --stat-tr: red; /* transit */
  --stat-ch: red; /* chez patient (si rouge chez toi) */
  --stat-at: red; /* at‚Ä¶ (rouge chez toi) */
  --stat-ot: blue; /* occup√© terrain */
  --stat-nd: gray; /* non dispo */
  --stat-hs: gray; /* HS */
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}

html,
body,
#map {
  height: 100%;
  margin: 0;
  overflow: hidden;
  display: flex;
  font-family: sans-serif;
  overflow-x: hidden;
  max-width: 100vw;
}

body {
  overflow: hidden;
  background: var(--ui-bg-alt);
  color: var(--text);
}

/* === TOP BAR === */
#top-bar {
  background: var(--topbar-bg);
  color: var(--topbar-fg);
  padding: 0px 20px;
  font-size: 0.95rem;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center; /* <-- centrage vertical */
  position: absolute; /* ou 'fixed' si tu veux qu‚Äôelle reste au scroll */
  top: 0;
  left: 0;
  right: 0;
  height: 56px; /* ou ta hauteur r√©elle */
  z-index: 3000; /* au-dessus de map, panneaux, boutons */
  box-shadow: 0 2px 4px var(--shadow-sm);
}

#top-bar > * {
  align-self: center;
}

#top-bar > button {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  line-height: 1;
  padding: 6px 10px;
  margin: 0; /* <-- √©vite un √©ventuel d√©calage vertical */
}

#top-bar #player-info {
  flex-grow: 1;
}

#top-bar button {
  background: var(--btn-bg);
  border: 1px solid var(--btn-border);
  color: var(--btn-text);
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.2s ease;
  line-height: 1;
}
#top-bar button:hover {
  background: var(--btn-hover-bg);
}

.panel-hidden {
  display: none !important;
}

.resize-slider {
  width: 6px;
  cursor: ew-resize;
  position: absolute;
  top: 50px;
  bottom: 0;
  background-color: transparent; /* important */
  z-index: 1500;
  transition: background-color 0.2s ease;
}

.resize-slider:hover::before {
  background-color: #666; /* effet hover */
}

.resize-slider::before {
  content: "";
  position: absolute;
  top: 10%;
  bottom: 10%;
  left: 50%;
  transform: translateX(-50%);
  width: 3px; /* barre visuelle centr√©e et fine */
  background-color: #ccc;
  border-radius: 2px;
  transition: background-color 0.2s ease;
}

.no-transition {
  transition: none !important;
}

.reopen-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: var(--accent);
  color: var(--btn-text);
  padding: 5px 1px;
  border: none;
  border-radius: 0 4px 4px 0;
  z-index: 2000;
  cursor: pointer;
  box-shadow: 0 2px 6px var(--shadow-lg);
  font-size: 18px;
}

.reopen-btn:hover {
  background: var(--accent-hover);
}

.reopen-btn[style*="right"] {
  border-radius: 4px 0 0 4px;
}

#interventions-container {
  position: absolute;
  top: 50px;
  bottom: 0;
  left: 0;
  width: 250px;
  background: var(--ui-bg);
  z-index: 1001;
  overflow: hidden; /* ‚úÖ Plus aucun scroll ici */
  display: flex;
  flex-direction: column;
  transition: width 0.3s ease;
  cursor: default; /* ‚úÖ Pas de curseur resize ici */
}

#interventions-container * {
  max-width: 100%;
  width: 100%;
  box-sizing: border-box;
}

#buildings-container {
  position: absolute;
  top: 50px; /* sous la top bar */
  bottom: 0; /* jusqu‚Äôen bas */
  right: 0;
  width: 250px;
  background: var(--ui-bg);
  z-index: 1001;
  overflow-y: auto; /* ‚úÖ permet de scroller si contenu trop long */
  display: flex;
  flex-direction: column;
}

#reopen-interventions-btn,
#reopen-buildings-btn {
  cursor: pointer;
  background-color: var(--accent);
  color: var(--btn-text);
  border: none;
  border-radius: 0 4px 4px 0;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
  transition: background-color 0.3s ease;
}

#reopen-buildings-btn {
  cursor: pointer;
  background: var(--btn-bg);
  color: var(--btn-text);
  border: 1px solid var(--btn-border);
  border-radius: 8px;
  box-shadow: none;
  transition: background 0.2s ease;
}

#reopen-interventions-btn:hover,
#reopen-buildings-btn:hover {
  background: var(--btn-hover-bg);
}

#map-container {
  position: absolute;
  top: 50px;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1; /* la map est en dessous */
}

#toggle-interventions,
#toggle-buildings {
  margin: 10px auto 0 auto;
  background: var(--btn-bg);
  color: var(--btn-text);
  border: 1px solid var(--btn-border);
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 13px;
  line-height: 1.2;
  cursor: pointer;
  transition: background 0.2s ease;
  width: 80%;
  display: block;
}
#toggle-interventions:hover,
#toggle-buildings:hover {
  background: var(--btn-hover-bg);
}

#log-radio-panel {
  flex-shrink: 0;
  overflow-y: auto;
  background: #212529;
  color: var(--btn-text);
  padding: 5px;
}

/* === SIDEBAR === */
#sidebar {
  width: 360px;
  background: var(--color-bg);
  border-right: 1px solid #ccc;
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
}

#sidebar h2 {
  font-size: 1.1rem;
  margin-bottom: 10px;
}

#sidebar-top,
#sidebar-bottom {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  border-bottom: 1px solid var(--ui-border);
}

#add-building-btn {
  width: 100%;
  padding: 10px;
  background: var(--btn-bg);
  color: var(--btn-text);
  border: 1px solid var(--btn-border);
  border-radius: 8px;
  margin-bottom: 10px;
  cursor: pointer;
  transition: background 0.2s ease;
}
#add-building-btn:hover {
  background: var(--btn-hover-bg);
}

/* === BUILDINGS === */
#building-list {
  overflow-y: auto;
  overflow-x: hidden;
  flex: 1 1 auto;
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
#building-list li {
  background: var(--ui-bg);
  border-radius: 8px;
  padding: 12px;
  box-shadow: 0 2px 6px var(--shadow-sm);
}

.building-block {
  width: 100%;
  min-width: 0;
  background: var(--ui-bg);
  border-radius: 12px;
  padding: 18px 16px;
  box-shadow: 0 4px 12px var(--shadow-sm); /* üí™ Ombre plus forte */
  transition: transform 0.18s, box-shadow 0.18s;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  border-left: 6px solid transparent; /* par d√©faut */
}

.building-block:hover {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 6px 18px var(--shadow-lg); /* ombre au survol */
}

/* üî¥ Pompiers */
.building-block.cpi,
.building-block.cs,
.building-block.csp {
  border-left-color: var(--danger);
}

/* üîµ Police */
.building-block.police {
  border-left-color: #3498db;
}

/* üü¢ H√¥pitaux */
.building-block.hopital {
  border-left-color: #2ecc71;
}

.manage-panel {
  margin-top: 10px;
  border-top: 1px solid #e3e3e3;
  padding-top: 10px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

/* === VEHICULES === */
.vehicle-list li {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px;
  border-bottom: 1px solid #f0f0f0;
}

.status {
  padding: 3px 6px;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: bold;
  color: var(--btn-text);
}
.status.dc {
  background-color: var(--stat-dc);
}
.status.er,
.status.al,
.status.tr,
.status.ch,
.status.at {
  background-color: var(--stat-er);
}
.status.ot {
  background-color: var(--stat-ot);
}
.status.nd,
.status.hs {
  background-color: var(--stat-nd);
}

/* === MAP === */
#map {
  flex-grow: 1;
  position: relative;
  width: 100%;
  height: 100%;
}

#history-button-wrapper {
  margin-bottom: 12px; /* ajuste √† ton go√ªt */
}

/* === MISSIONS === */
#mission-list {
  width: 100%;
  box-sizing: border-box;

  overflow: visible;
}

#mission-list li {
  background-color: var(--ui-bg);
  border-radius: 8px;
  padding: 14px 18px;
  margin-bottom: 16px;
  box-shadow: 0 2px 5px var(--shadow-sm);
  display: flex;
  flex-direction: column;
  gap: 10px;

  transition: transform 0.2s ease, box-shadow 0.2s ease;

  width: 100%; /* üëà prend toute la largeur disponible */
  box-sizing: border-box; /* üëà emp√™che les d√©bordements via padding */
}

/* Couleur par √©tat */
#mission-list li.non-lancee {
  border-left: 6px solid var(--danger); /* rouge - appel en attente */
}
#mission-list li.attente {
  border-left: 6px solid var(--warning); /* orange - v√©hicule manquant */
}
#mission-list li.transit {
  border-left: 6px solid #f1c40f; /* jaune - en transit */
}
#mission-list li.en-cours {
  border-left: 6px solid #2ecc71; /* vert - intervention en cours */
}

#mission-list li h3 {
  font-size: 1.2rem;
  font-weight: bold;
}

#mission-list li p {
  font-size: 0.9rem;
}

#mission-list li h3,
#mission-list li p {
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

#mission-list li button {
  padding: 8px 12px;
  background-color: var(--accent);
  color: var(--btn-text);
  border: none;
  cursor: pointer;
  border-radius: 5px;
  width: 100%;
  text-align: center;
  transition: background-color 0.3s ease;
}

#mission-list li:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 14px rgba(44, 62, 80, 0.12);
}

#mission-list li button:hover {
  background-color: var(--accent-hover);
}

/* === HISTORY MODAL === */
.history-list {
  max-height: 300px;
  overflow-y: auto;
  padding: 0;
  margin: 10px 0;
  border: 1px solid #ccc;
  border-radius: 6px;
  background-color: #f9f9f9;
}
.history-list li {
  list-style: none;
  padding: 8px 12px;
  font-size: 0.95rem;
  border-bottom: 1px solid var(--ui-border);
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.history-list li:last-child {
  border-bottom: none;
}

/* === MODAL === */
.modal-overlay,
#modal,
.modal {
  position: fixed;
  inset: 0;
  background: var(--overlay);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}
#vehicle-delete-modal {
  z-index: 1100 !important;
}

.modal-content {
  background: var(--ui-bg);
  padding: 28px;
  border-radius: 12px;
  width: 90%;
  max-width: 600px;
  max-height: 85vh;
  overflow-y: auto;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
  animation: fadeIn 0.3s ease;
  display: flex;
  flex-direction: column;
  gap: 20px;
  position: relative;
  z-index: 1100; /* Modale au dessus de l‚Äôoverlay */
}
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.modal-content h2,
.modal-content h3 {
  font-size: 1.5rem;
  margin-bottom: 16px;
  color: #2c3e50;
}
.modal-content p,
.modal-content label,
.modal-content button {
  font-size: 1rem;
}
.modal-content input,
.modal-content select {
  width: 100%;
  padding: 8px;
  margin-top: 4px;
  border-radius: 6px;
  border: 1px solid #ccc;
}

/* === BOUTONS STYL√âS (align√©s sur la topbar) === */
button {
  font-weight: 600;
  padding: 8px 14px;
  border-radius: 8px;
  cursor: pointer;
  line-height: 1.1;
  border: 1px solid var(--btn-border);
  background: var(--btn-bg);
  color: var(--btn-text);
  backdrop-filter: blur(6px);
  transition: background 0.2s ease, transform 0.05s ease;
}
button:hover {
  background: var(--btn-hover-bg);
}
button:active {
  transform: translateY(1px);
}

/* Variantes */
button.danger {
  background: var(--danger-bg);
  border-color: transparent;
  color: var(--topbar-fg);
}
button.danger:hover {
  background: var(--danger-hover);
}

button.warning {
  background: var(--warning-bg);
  border-color: transparent;
  color: var(--topbar-fg);
}
button.warning:hover {
  background: var(--warning-hover);
}

button.secondary {
  background: var(--btn-bg);
  color: var(--topbar-fg);
}
button.secondary:hover {
  background: var(--btn-bg);
}

/* === AUTRES === */

/* verrouillage du scroll arri√®re-plan quand une modale est ouverte */
body.modal-open {
  overflow: hidden;
}

/* m√™mes espacements/typos que r√©ception */
.modal-content.extra-large h2,
.modal-content.extra-large .modal-title {
  font-size: 22px;
  line-height: 1.25;
  margin: 0;
}

.modal-content.extra-large .form-row {
  margin: 10px 0 14px;
}

.modal-content.extra-large label {
  display: block;
  font-weight: 600;
  margin-bottom: 6px;
}

.modal-content.extra-large select,
.modal-content.extra-large textarea,
.modal-content.extra-large input[type="text"] {
  width: 100%;
  min-height: 38px;
}

.modal-content.extra-large textarea {
  min-height: 96px;
  resize: vertical;
}

.call-card {
  background: #fff;
  border: 1px solid var(--color-panel-border);
  border-radius: 8px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
  display: flex;
  flex-direction: column;
  min-height: 100px;
  flex: 1 1 auto;
  min-height: 0;
}

/* √âtend la zone v√©hicules pour utiliser toute la hauteur disponible */
#call-card-vehicles {
  display: flex;
  flex-direction: column;
}
#vehicle-selection-section {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: auto;
}
#vehicle-list {
  flex: 1;
  overflow: auto;
}

.call-card-h {
  padding: 10px 12px;
  font-weight: 700;
  border-bottom: 1px solid #e8eff6;
  color: #2b3c4f;
}

.call-row {
  padding: 10px 12px;
}
.full {
  width: 100%;
}

.label {
  display: block;
  font-weight: 600;
  margin-bottom: 6px;
}

.addr-box {
  min-height: 40px;
  display: flex;
  align-items: center;
  padding: 8px 10px;
  border: 1px solid var(--ui-border);
  border-radius: 6px;
  background: var(--ui-panel);
  font-size: 14px;
}

/* segmented buttons */
#btn-service-pompiers,
#btn-service-police {
  padding: 6px 12px;
  border-radius: 6px;
  border: 1px solid var(--btn-hover-bg);
  background: var(--btn-bg);
}
#btn-service-pompiers.active,
#btn-service-police.active {
  background: #5e7997;
  color: var(--topbar-fg);
  border-color: #5e7997;
}

/* recap */
.recap {
  padding: 8px 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.recap-row {
  display: flex;
  gap: 10px;
  align-items: flex-start;
}
.recap-k {
  width: 92px;
  font-weight: 600;
  color: #304354;
}
.recap-v {
  flex: 1;
  color: #22313f;
  word-break: break-word;
}
.recap-ul {
  margin: 0;
  padding-left: 18px;
}

.modal-section {
  margin-bottom: 24px;
}
.modal-section h4 {
  font-size: 1.1rem;
  margin-bottom: 8px;
  border-bottom: 1px solid #ddd;
  padding-bottom: 4px;
}
.modal-section .button-row {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin: 8px 0;
}
.vehicle-item {
  display: flex;
  justify-content: space-between;
  padding: 6px 10px;
  border-bottom: 1px solid #f0f0f0;
  transition: background-color 0.2s ease;
}
.vehicle-item:hover {
  background-color: #f9f9f9;
}
.vehicle-delete-list li {
  display: flex;
  justify-content: space-between;
  padding: 8px;
  border-bottom: 1px solid var(--ui-border);
}
.vehicle-delete-list button {
  background-color: var(--danger);
  color: var(--btn-text);
  padding: 4px 8px;
  border-radius: 4px;
}
.vehicle-delete-list button:hover {
  background-color: var(--danger-hover);
}

.toast-notification {
  position: fixed;
  top: 60px;
  left: 50%;
  transform: translateX(-50%) translateY(-20px);
  background: var(--accent);
  color: var(--btn-text);
  padding: 14px 24px;
  border-radius: 8px;
  font-weight: bold;
  font-size: 1rem;
  opacity: 0;
  z-index: 9999;
  transition: opacity 0.3s ease, transform 0.3s ease;
  pointer-events: none;
  max-width: 90vw;
  box-shadow: 0 4px 12px var(--shadow-md);
}

.toast-notification.visible {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* Types */
.toast-success {
  background: var(--accent);
}
.toast-error {
  background: var(--danger);
}
.toast-info {
  background: var(--accent);
}
.toast-level {
  background: #9b59b6;
}

.perso-left {
  font-weight: bold;
  margin: 0 2px;
}

.building-header.no-staff {
  background-color: #ffb8b8;
  border-left: 4px solid #cc0000;
}

.building-group {
  margin-bottom: 12px;
  padding: 8px;
  border: 1px solid var(--ui-border);
  border-radius: 6px;
  background: var(--ui-bg);
}

.building-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
  font-weight: bold;
}

.building-header .bh-left {
  display: flex;
  align-items: center;
}
.building-header .bh-right {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  white-space: nowrap;
}
.building-header .grp-label {
  opacity: 0.85;
}
.building-header .grp-count {
  font-variant-numeric: tabular-nums;
}

/* === COMMUN === */
.vehicle-select-row {
  display: grid;
  grid-template-columns: 24px 1fr 65px 36px;
  align-items: center;
  padding: 6px 10px;
  column-gap: 8px;
  border-bottom: 1px solid var(--ui-border);
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.3s, background-color 0.3s, color 0.3s;
}
.vehicle-select-row:hover {
  background-color: #70adfd;
}
.vehicle-select-row input[type="checkbox"] {
  grid-column: 1;
  margin: 0;
  align-self: center;
  justify-self: center;
  height: 16px;
  width: 16px;
  display: block;
}
/* Emp√™che le flash si la souris n‚Äôa pas boug√© (am√©liore la stabilit√© du hover) */
.vehicle-list-ui,
.vehicle-list-scroll {
  will-change: background;
}

.in-transport {
  opacity: 0.7;
  font-style: italic;
  background: #eaf6ff;
}

.timer-er {
  color: var(--accent);
  font-weight: bold;
  margin-left: 8px;
}

.vehicle-label {
  grid-column: 2;
  font-weight: 500;
  font-size: 0.92rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.vehicle-distance {
  grid-column: 3;
  text-align: right;
  font-size: 0.85rem;
  color: var(--text-muted);
}
.status {
  grid-column: 4;
  font-size: 0.72rem;
  font-weight: bold;
  padding: 2px 4px;
  border-radius: 4px;
  color: var(--btn-text);
  text-align: center;
  white-space: nowrap;
  min-width: 28px;
  max-width: 32px;
}

/* === CONTEXTE : Prise d'appel === */
.vehicle-selection-context .vehicle-select-row {
  background-color: #f9fcff;
  border: 1px solid #d0e4f7;
}
.vehicle-selection-context .vehicle-select-row:hover {
  background-color: #dcefff;
}

/* === CONTEXTE : Renfort === */
.reinforcement-selection-context .vehicle-select-row {
  background-color: #f9fff9;
  border: 1px solid #cce6cc;
  transition: background 0.3s, background-color 0.3s, color 0.3s;
}
.reinforcement-selection-context .vehicle-select-row:hover {
  background-color: #72ff72;
}

.reinforcement-selection-context .vehicle-list-ui {
  will-change: background;
}

/* Pour √©viter le style de debug restant (√† retirer si pr√©sent) */
.vehicle-label {
  background: none;
  border: none;
}

.vehicle-entry {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  padding: 6px 8px;
  border-bottom: 1px solid var(--ui-border);
}

.vehicle-actions {
  display: flex;
  align-items: center;
  gap: 6px; /* r√©duit l‚Äôespace entre badge et croix */
}

.vehicle-status-right {
  font-size: 0.85rem;
  font-weight: bold;
  min-width: 120px;
  text-align: right;
}

.vehicle-entry .btn-cancel {
  background: var(--danger);
  color: var(--btn-text);
  border: none;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 0.85rem;
  cursor: pointer;
}

.vehicle-entry .btn-cancel:hover {
  background: var(--danger-hover);
}

.btn-cancel {
  margin-left: 0;
}

.progress-bar {
  height: 6px;
  background-color: #4caf50;
  width: 0%;
  transition: width 0.3s ease;
  border-radius: 4px;
  margin-top: 6px;
}

.mission-timer {
  font-size: 0.85rem;
  color: var(--text);
  margin-top: 4px;
}

#map-notice {
  position: absolute;
  top: 10%; /* plus bas qu'en haut de l'√©cran */
  left: 50%;
  transform: translateX(-50%);
  background: var(--ui-bg);
  padding: 12px 20px;
  border-radius: 10px;
  box-shadow: 0 2px 12px var(--shadow-lg);
  z-index: 1000;
  display: flex;
  align-items: center;
  gap: 12px;
  max-width: 500px;
  font-size: 16px;
}

.patient-list {
  list-style: none;
  padding: 0;
  margin-top: 20px;
  max-height: 300px;
  overflow-y: auto;
}

.patient-list li {
  padding: 10px 12px;
  margin-bottom: 10px;
  background: #f0f4f8;
  border-left: 5px solid #3498db;
  border-radius: 6px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.patient-list .critical {
  border-left-color: var(--danger);
}
.patient-list .moderate {
  border-left-color: #f1c40f;
}
.patient-list .light {
  border-left-color: #2ecc71;
}

.button-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin: 10px 0;
}

.button-grid button {
  flex: 1 1 45%;
  padding: 10px;
  border-radius: 6px;
  border: none;
  background-color: #3498db;
  color: var(--btn-text);
  cursor: pointer;
  transition: background-color 0.2s ease;
}
.button-grid button:hover {
  background-color: #2980b9;
}

#auth-box {
  display: none;
}

#game-ui {
  height: 100vh;
  display: flex;
  flex-direction: column;
}

/* === DASHBOARD LAYOUT === */
#game-container {
  position: relative; /* <- important */
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}

#right-panel {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-width: 0;
  overflow: hidden;
}

#map-panel {
  height: 100%; /* <- Mettre exactement √† 100% */
  position: relative;
  overflow: hidden;
}

#buildings-panel {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
}

#buildings-header {
  padding: 10px;
  flex-shrink: 0;
}

/* === AUTH UI === */
.auth-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  background: linear-gradient(135deg, #2980b9, #6dd5fa);
  color: var(--topbar-fg);
  padding: 20px;
}

.auth-container h3 {
  margin-bottom: 16px;
  font-size: 1.5rem;
}

.auth-container input {
  padding: 10px;
  width: 280px;
  max-width: 90vw;
  margin-bottom: 12px;
  border: none;
  border-radius: 6px;
  font-size: 1rem;
}

.auth-container button {
  padding: 10px 20px;
  background-color: var(--accent);
  border: none;
  border-radius: 6px;
  font-size: 1rem;
  cursor: pointer;
  transition: background-color 0.3s ease;
  color: var(--btn-text);
}

.auth-container button:hover {
  background-color: #27ae60;
}

.auth-container p {
  margin-top: 10px;
  font-size: 0.95rem;
}

.auth-container a {
  color: var(--topbar-fg);
  text-decoration: underline;
  cursor: pointer;
}

.connected-user {
  margin-left: auto;
  margin-right: 10px;
  font-weight: bold;
  color: #ecf0f1;
  font-size: 0.9rem;
}

.depart-buttons {
  margin-top: 10px;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}
.depart-buttons button {
  padding: 8px 14px;
  background-color: var(--btn-bg);
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
  transition: background-color 0.2s ease;
}
.depart-buttons button:hover {
  background-color: var(--btn-hover-bg);
}

.depart-back {
  margin-top: 15px;
}

.toggle-veh-btn {
  font-size: 12px;
  padding: 2px 5px;
  margin-left: 5px;
  cursor: pointer;
}
.vehicle-list.hidden {
  display: none;
}

.filter-btn {
  font-size: 12px;
  padding: 4px 6px;
  border: 1px solid var(--btn-border);
  background: var(--btn-bg);
  cursor: pointer;
}
.filter-btn:hover {
  background: var(--btn-hover-bg);
}

#add-building-fab {
  position: absolute;
  bottom: 22px;
  right: 22px;
  width: 54px;
  height: 54px;
  border-radius: 50%;
  background: #27ae60;
  color: var(--btn-text);
  font-size: 2.2rem; /* 2.2 ou 2.4 rem selon la police */
  box-shadow: 0 4px 18px rgba(44, 62, 80, 0.15);
  border: none;
  cursor: pointer;
  z-index: 1001;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s, transform 0.13s;
  padding: 0;
  line-height: 1;
}
#add-building-fab:hover {
  background: #1e8449;
  transform: scale(1.08);
}

#toggle-all-vehicles-btn {
  background: var(--btn-bg);
  border: 1px solid var(--btn-border);
  border-radius: 8px;
  margin-left: 6px;
  cursor: pointer;
  font-size: 18px;
  transition: background 0.15s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 30px;
  color: var(--btn-text);
}
#toggle-all-vehicles-btn:hover {
  background: var(--btn-hover-bg);
}

.history-entry {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 1em;
  padding: 4px 0;
}
.history-entry-label {
  font-weight: bold;
}
.history-entry-reward {
  color: #219653;
  font-weight: bold;
  margin-left: 8px;
}

.btn-transport {
  background: var(--accent);
  color: var(--topbar-fg);
  border: none;
  padding: 2px 8px;
  border-radius: 4px;
  margin-left: 8px;
  cursor: pointer;
  font-size: 0.92em;
  transition: background 0.2s;
}
.btn-transport:hover {
  background: var(--accent);
}

.vehicle-list-scroll {
  max-height: 260px; /* ou ajuste selon ton design, ex 6-8 lignes */
  overflow-y: auto;
  border: 1px solid var(--ui-border);
  border-radius: 6px;
  padding: 0;
  margin-bottom: 12px;
  background: var(--ui-bg);
}

/* Am√©liore le style si besoin */
.vehicle-list-scroll li {
  padding: 6px 8px;
  border-bottom: 1px solid var(--ui-border);
}
.vehicle-list-scroll li:last-child {
  border-bottom: none;
}

#vehicle-search-container {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 6px;
}

#reinforcement-search-container {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 6px;
}

#missions-panel {
  width: 100%;
  min-width: 0;
  max-width: none;
  background: #fff;
  border-right: 1px solid #ccc;
  padding: 16px 12px 0 12px;
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0;
  overflow: hidden; /* ‚úÖ pas de scroll ici non plus */
}

#missions-panel * {
  box-sizing: border-box;
  max-width: 100%;
}

#missions-panel h2 {
  font-size: 1.1rem;
  margin-bottom: 12px;
}

/* WRAPPER qui prend toute la hauteur dispo (missions + log radio) */
#missions-main {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  min-height: 0;
  height: 100%;
  overflow: hidden; /* ‚úÖ coupe tout scroll ici aussi */
}

/* Liste des missions (prend 2/3 de l'espace) */
#missions-list-wrapper {
  flex: 1 1 auto;
  overflow-y: auto;
  overflow-x: hidden;
  min-height: 0;
}

/* Header log radio */
.radio-log-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 16px 2px 16px;
}

#radio-log-panel {
  flex-shrink: 0;
  height: 300px; /* hauteur fixe claire */
  background: #181a23;
  color: #ffe37b;
  padding: 8px 0 0 0;
  border-top: 1px solid #222;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
  margin-top: 8px;
  margin-bottom: 8px;
}

#radio-log-list {
  flex: 1 1 auto;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 0 4px;
  margin: 0;
  list-style: none;
  display: flex;
  flex-direction: column;
  font-size: 0.85rem;
  gap: 3px;
}

.radio-log-line {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 2px 6px;
  font-family: Consolas, monospace;
  font-size: 0.85em;
  white-space: nowrap;
  overflow: hidden;
}

.radio-log-line .status {
  font-size: 0.7em;
  padding: 2px 6px;
  border-radius: 3px;
  flex-shrink: 0; /* Ne r√©tr√©cit pas */
  flex-grow: 0; /* Ne grandit pas */
  flex-basis: auto; /* Taille selon contenu */
  white-space: nowrap;
  width: auto !important; /* ‚ùóÔ∏èFORCE la largeur */
  display: inline-block !important; /* Emp√™che un h√©ritage display:block */
  max-width: max-content;
}

#vehicle-dashboard-modal {
  z-index: 2001 !important;
}
#vehicle-board-modal {
  z-index: 2000 !important;
}

.recruit-row {
  display: flex;
  gap: 8px; /* Espace entre les boutons */
  margin-bottom: 8px; /* R√©duit l‚Äôespace sous les boutons */
  margin-top: 2px; /* √âvite trop d‚Äôespace au-dessus */
  flex-wrap: wrap; /* Si jamais √ßa d√©passe en petit √©cran */
}

.btn-recruit {
  padding: 6px 14px; /* Bouton plus petit */
  font-size: 15px; /* Texte r√©duit */
  border-radius: 8px;
  font-weight: 500;
  background: var(--accent); /* La couleur d‚Äôorigine, ajuste si besoin */
  color: var(--btn-text);
  border: none;
  transition: background 0.2s;
  cursor: pointer;
}

.btn-recruit:hover {
  background: #217dbb;
}

.desc-recruit {
  color: #666;
  font-size: 13px;
  font-style: italic;
  margin-left: 2px;
}

.status.selected-synced {
  transition: background-color 0.2s ease, color 0.2s ease;
  border: 1px solid currentColor;
}

.building-header.no-staff-full {
  color: var(--stat-er);
  font-weight: bold;
}
.vehicle-select-row.vehicle-disabled {
  opacity: 0.5;
}

.modal-statistics .modal-content {
  width: 90%;
  max-width: 700px;
  max-height: 80vh;
  overflow-y: auto;
  background: #fff;
  border-radius: 10px;
  padding: 20px;
}

.modal-statistics header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.modal-statistics header h2 {
  margin: 0;
  font-size: 1.4rem;
}

.modal-statistics .tab-switch {
  display: flex;
  gap: 10px;
}

.modal-statistics .tab-switch button {
  flex: 1;
  padding: 8px 12px;
  background-color: #ddd;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.95rem;
}

.modal-statistics .tab-switch button.active {
  background-color: #3498db;
  color: var(--btn-text);
}

.modal-statistics .stats-table {
  width: 100%;
  border-collapse: collapse;
}

.modal-statistics .stats-table th,
.modal-statistics .stats-table td {
  border: 1px solid #ccc;
  padding: 8px;
  text-align: left;
  font-size: 0.9rem;
}

.modal-statistics .stats-table th {
  background-color: #f0f0f0;
}

.modal-statistics .stats-container {
  margin-top: 10px;
}

.modal-statistics .search-input {
  margin-bottom: 10px;
  width: 100%;
  padding: 6px 10px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

th.sortable {
  color: #3498db;
  text-decoration: underline;
}
th.sorted {
  font-weight: bold;
}

.manage-btn {
  padding: 3px 10px;
  border-radius: 6px;
  background: var(--accent);
  color: var(--topbar-fg);
  border: none;
  font-size: 0.96em;
  cursor: pointer;
  transition: background 0.2s;
}
.manage-btn:hover {
  background: #216099;
}

.interventions-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

#mission-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  position: relative;
  font-size: 18px;
  width: 24px;
  height: 24px;
}

#mission-toggle::before {
  content: "üìû";
}

#mission-toggle::after {
  content: "";
  width: 8px;
  height: 8px;
  border-radius: 50%;
  position: absolute;
  bottom: 0;
  right: 0;
  background-color: limegreen; /* active */
  border: 1px solid var(--btn-text);
}

#mission-toggle.paused::after {
  background-color: crimson; /* paused */
}

.header-controls {
  display: flex;
  gap: 10px;
}

#sound-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 18px;
  width: 24px;
  height: 24px;
  position: relative;
}

#sound-toggle::before {
  content: "üîä";
}

#sound-toggle.muted::before {
  content: "üîá";
}

.mission-timer {
  margin-left: 10px;
  font-size: 0.9em;
  color: var(--btn-border);
}

.mission-status {
  font-weight: normal;
}

.loader-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--overlay);
  z-index: 9999;
  display: flex;
  justify-content: center;
  align-items: center;
}

.loader-box {
  background: var(--ui-bg);
  padding: 20px 30px;
  border-radius: 10px;
  text-align: center;
  font-family: sans-serif;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
}

.spinner {
  border: 4px solid #eee;
  border-top: 4px solid #3498db;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  animation: spin 1s linear infinite;
  margin: 0 auto 10px;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.hidden {
  display: none !important;
}

#loader-progress {
  transition: all 0.2s ease;
  font-weight: bold;
  font-size: 1.2em;
}

.bonus-chip {
  background-color: #ff5722;
  color: var(--btn-text);
  font-size: 0.75em;
  padding: 2px 6px;
  border-radius: 8px;
  margin-left: 4px;
}

.reinforcement-filters {
  display: flex;
  gap: 6px;
  margin: 10px 0;
}

.building-group.fire {
  border-left: 4px solid var(--danger);
  padding-left: 6px;
}

.building-group.hospital {
  border-left: 4px solid #2ecc71;
  padding-left: 6px;
}

.building-group.police {
  border-left: 4px solid #3498db;
  padding-left: 6px;
}

/* Regroupe infos joueur + barre d'XP */
#player-info-container {
  display: grid;
  grid-template-columns: 1fr;
  gap: 2px;
  align-items: center;

  /* Encadr√© */
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.18);
  border-radius: 10px;
  padding: 6px 12px;

  /* pour que la barre prenne toute la largeur de l‚Äôencadr√© */
  min-width: 240px;
}

/* ligne "Niveau | Argent" */
#player-info {
  font-weight: 600;
}

/* on veut la barre √† 100% de l‚Äôencadr√© */
#xp-block {
  width: 100%;
}

/* barre plus √©paisse + pleine largeur */
#xp-bar {
  width: 100%;
  height: 12px; /* <-- + √©paisse (√©tait √† 6px) */
  background: rgba(255, 255, 255, 0.18);
  border-radius: 999px;
  overflow: hidden;
}

/* si tu ne veux pas afficher le libell√© au-dessus */
#xp-label {
  display: none;
}

#xp-bar-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #f6d365, #fda085);
  transition: width 300ms ease;
}

/* M√©t√©o & cycle : petits badges */
#env-info {
  display: flex;
  gap: 8px;
  align-items: center;
  margin-left: auto;
}
.env-block {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.14);
  border-radius: 10px;
  line-height: 1;
  font-weight: 600;
}
.env-block img {
  width: 18px;
  height: 18px;
  display: block;
}

.calls-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  margin-bottom: 8px;
  flex-direction: column;
  padding-right: 30px; /* laisse la place √† la croix */
}
.calls-header h2 {
  margin: 0;
}

.calls-stats .chip {
  background: #f3f4f6;
  border-radius: 999px;
  padding: 4px 10px;
  margin-right: 6px;
  font-size: 13px;
}
.calls-stats .chip strong,
.calls-stats .chip b {
  font-weight: 700;
}

.calls-table-wrapper {
  flex: 1;
  overflow: auto;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  background: var(--ui-bg);
}

.calls-table {
  width: 100%;
  border-collapse: collapse;
}
.calls-table th,
.calls-table td {
  padding: 8px 10px;
  border-bottom: 1px solid #f0f0f0;
  text-align: left;
  font-size: 14px;
}
.calls-table tr.waiting {
  background: #fee2e2;
} /* en attente (rose clair) */
.calls-table tr.inprogress {
  background: #fef3c7;
} /* en cours (jaune clair) */
.calls-table tr.handled {
  background: #e0f2fe;
} /* trait√© (bleu clair) */

.badge {
  display: inline-block;
  min-width: 22px;
  padding: 2px 6px;
  border-radius: 10px;
  font-size: 12px;
  line-height: 1;
  background: #111827;
  color: var(--topbar-fg);
  text-align: center;
}

/* bouton ‚Äúplein largeur‚Äù dans la sidebar */
#calls-quick-actions .fullwidth {
  width: 100%;
  margin-top: 8px;
}

/* Le panneau d'appels DOIT passer au-dessus des sidebars */
.modal-overlay {
  position: fixed; /* <- au lieu de absolute si c'est le cas */
  inset: 0; /* top/left/right/bottom:0 */
  z-index: 9999; /* au-dessus de tes sidebars */
  background: var(--shadow-md);
}

/* Assure que le contenu de la modale statistiques passe AU-DESSUS de l'overlay */
.modal-statistics .modal-overlay {
  z-index: 9999;
}
.modal-statistics .modal-content {
  position: relative;
  z-index: 10001;
}

/* Clignotement rouge du bouton "Appels en attente" quand un nouvel appel arrive */
#open-calls-panel.notify {
  animation: blink-red 1s infinite;
}
@keyframes blink-red {
  0%,
  100% {
    background: var(--danger-strong);
    color: var(--topbar-fg);
  }
  50% {
    background: var(--danger-light);
    color: var(--topbar-fg);
  }
}

/* Pas de "clignotement" du hover quand on met √† jour les secondes */
.calls-table button {
  transition: background-color 0.15s ease, color 0.15s ease;
}

/* === MODAL XL ‚Äî Canonique === */
.modal-content.extra-large {
  width: 96vw;
  max-width: 1680px;
  max-height: 90vh; /* hauteur max, pas de scroll fant√¥me */
  display: flex; /* structure en colonne */
  flex-direction: column;
  overflow: auto; /* le contenu interne peut scroller */
}

/* grille plus haute pour profiter de la place */
.call-grid {
  display: grid;
  grid-template-columns: 2.4fr 1.4fr 1.6fr 1.1fr; /* Carte plus large */
  gap: 14px;
  min-height: calc(65vh - 32px);
  padding: 6px 2px 14px 2px;
}

/* Encadr√© dialogue qui prend toute la largeur */
.span-all {
  grid-column: 1 / -1;
}

/* Lignes v√©hicules: grille propre (plus de superposition) */
.modal-content.extra-large .vehicle-select-row {
  display: grid !important; /* force sur flex √©ventuel */
  grid-template-columns: 22px 1fr 90px auto; /* [‚òë] [Libell√©] [Distance] [Statut] */
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 6px;
}
.modal-content.extra-large .vehicle-select-row .vehicle-label {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.modal-content.extra-large .vehicle-select-row .vehicle-distance {
  text-align: right;
  white-space: nowrap;
  font-variant-numeric: tabular-nums;
  min-width: 70px;
}

/* Statut (DC/OT‚Ä¶) en badge */
.modal-content.extra-large .vehicle-select-row .status {
  justify-self: end;
  white-space: nowrap;
  display: inline-block;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 12px;
  line-height: 16px;
  border: 1px solid var(--shadow-sm);
}

/* mini-carte un peu plus haute */
#call-mini-map {
  flex: 1 1 auto;
  height: 100%;
  min-height: 380px;
  border-radius: 6px;
  overflow: hidden;
}

/* Bouton de fermeture (croix) en haut √† droite des modales */
.modal-content .modal-close {
  position: absolute;
  top: 8px; /* au lieu de 10px */
  right: 8px; /* au lieu de 12px */
  border: none;
  background: transparent;
  font-size: 20px;
  line-height: 1;
  cursor: pointer;
  z-index: 1200;
}

.modal-content .modal-close.close-red {
  color: #c62828; /* rouge */
}

.modal-content .modal-close.close-red:hover {
  filter: brightness(0.9);
  transform: scale(1.05);
}

/* Place le log radio au bas de la sidebar gauche */
#missions-main > #radio-log-panel {
  margin-top: auto; /* pousse "Log Radio" tout en bas */
}

/* Interrupteur "Ordonner manuellement" */
#manual-order-toggle {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin-left: 8px;
  font-size: 12px;
  opacity: 0.85;
}

/* √âtat draggable des items b√¢timent */
#buildings-list .building-item[draggable="true"] {
  cursor: grab;
}
#buildings-list .building-item.dragging {
  opacity: 0.6;
  cursor: grabbing;
  outline: 2px dashed var(--shadow-lg);
  outline-offset: 4px;
}

/* Petit handle (‚â°) √† droite du header de l‚Äôitem quand l‚Äôordre manuel est actif */
#buildings-list.manual .drag-handle {
  display: inline-block;
}
.drag-handle {
  display: none;
  user-select: none;
  margin-left: 8px;
  font-weight: 700;
  opacity: 0.55;
}

/* === Modal prise d'appel : mettre toute la hauteur √† la colonne v√©hicules === */

/* Le contenu de la modal occupe l'√©cran (et permet le scroll interne) */
.modal.call-modal .modal-content {
  display: flex;
  flex-direction: column;
  max-height: 90vh; /* ajuste si besoin */
}

/* Le corps de la modal en 3 colonnes, sans scroll lat√©ral parasite */
.modal.call-modal .modal-body {
  display: flex;
  gap: 1rem;
  overflow: hidden; /* crucial pour √©viter les scrolls imbriqu√©s */
  min-height: 0; /* permet aux enfants de prendre la hauteur */
}

/* Chaque colonne peut s'√©tirer et laisser ses enfants scroller */
.modal.call-modal .modal-col {
  display: flex;
  flex-direction: column;
  min-height: 0; /* indispensable avec flex */
}

/* Carte v√©hicules = carte/encadr√© principal "V√©hicules disponibles" */
#call-card-vehicles {
  display: flex;
  flex-direction: column;
  min-height: 0; /* pour que le bloc liste puisse scroller */
}

/* La section "V√©hicules disponibles" prend tout l'espace restant */
#vehicle-selection-section {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  min-height: 0;
  overflow: hidden; /* le scroll sera sur la liste */
}

/* La liste elle-m√™me occupe 100% de la hauteur disponible et scrolle */
#vehicle-list {
  flex: 1 1 auto;
  min-height: 0;
  overflow: auto;
  max-height: none !important; /* supprime tout plafond h√©rit√© */
}

/* Si les items sont dans un wrapper interne (ex. .vehicle-items), d√©commente :
.vehicle-items { flex: 1 1 auto; min-height: 0; overflow: auto; }
*/
